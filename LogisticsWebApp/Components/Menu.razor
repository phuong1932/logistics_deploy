@using Microsoft.AspNetCore.Components.Authorization
@inject AuthenticationStateProvider AuthStateProvider

@* Menu Navigation Component *@
<nav class="main-menu">
    <ul class="menu-list">
        <AuthorizeView Roles="admin,staff">

        <li class="menu-item">
            <NavLink class="menu-link" href="/dashboard" Match="NavLinkMatch.All">
                <span class="menu-icon">üè†</span>
                <span class="menu-text">Dashboard</span>
            </NavLink>
        </li>
        </AuthorizeView>
        
        @* Menu ƒê∆°n h√†ng - Hi·ªÉn th·ªã cho Admin v√† Staff *@
        <AuthorizeView Roles="admin,staff">
            <li class="menu-item dropdown">
                <a class="menu-link dropdown-toggle" href="#" @onclick="ToggleDonHang" @onclick:preventDefault>
                    <span class="menu-icon"><i class="fa-solid fa-file-invoice"></i></span>   
                    <span class="menu-text">ƒê∆°n h√†ng</span>
                    <span class="dropdown-arrow">‚ñº</span>
                </a>
                @if (showDonHang)
                {
                    <ul class="submenu">
                        <li><NavLink class="submenu-link" href="/cargo-list">Danh s√°ch ƒë∆°n h√†ng</NavLink></li>
                        <li><NavLink class="submenu-link" href="/create-cargo">Th√™m ƒë∆°n h√†ng</NavLink></li>
                        <AuthorizeView Roles="admin" Context="adminContext">
                            <li><NavLink class="submenu-link" href="/export-excel">Xu·∫•t Excel</NavLink></li>
                            <li><NavLink class="submenu-link" href="/storage_data">L∆∞u tr·ªØ d·ªØ li·ªáu</NavLink></li>
                        </AuthorizeView>
                    </ul>
                }
            </li>
        </AuthorizeView>

        @* Menu Kh√°ch h√†ng - Hi·ªÉn th·ªã cho Admin v√† Staff *@
        <AuthorizeView Roles="admin,staff">
            <li class="menu-item dropdown">
                <a class="menu-link dropdown-toggle" href="#" @onclick="ToggleKhachHang" @onclick:preventDefault>
                    <span class="menu-icon"><i class="fa-solid fa-user"></i></span>   
                    <span class="menu-text">Kh√°ch h√†ng</span>
                    <span class="dropdown-arrow">‚ñº</span>
                </a>
                @if (showKhachHang)
                {
                    <ul class="submenu">
                        <li><NavLink class="submenu-link" href="/customer-list">Danh s√°ch kh√°ch h√†ng</NavLink></li>
                        <li><NavLink class="submenu-link" href="/create-customer">Th√™m kh√°ch h√†ng</NavLink></li>
                    </ul>
                }
            </li>
        </AuthorizeView>

        @* Menu Ng∆∞·ªùi d√πng - Ch·ªâ hi·ªÉn th·ªã cho Admin *@
        <AuthorizeView Roles="admin,staff">
            <li class="menu-item dropdown">
                <a class="menu-link dropdown-toggle" href="#" @onclick="ToggleNhanVien" @onclick:preventDefault>
                    <span class="menu-icon">üë•</span>   
                    <span class="menu-text">Ng∆∞·ªùi d√πng</span>
                    <span class="dropdown-arrow">‚ñº</span>
                </a>
                @if (showNhanVien)
                {
                    <ul class="submenu">
                        <li><NavLink class="submenu-link" href="/user-list">Danh s√°ch ng∆∞·ªùi d√πng</NavLink></li>
                        <li><NavLink class="submenu-link" href="/create-user">Th√™m ng∆∞·ªùi d√πng</NavLink></li>
                    </ul>
                }
            </li>
        </AuthorizeView>

        @* Menu Shipper - Hi·ªÉn th·ªã cho t·∫•t c·∫£ roles *@
        <li class="menu-item dropdown">
            <a class="menu-link dropdown-toggle" href="#" @onclick="ToggleShipper" @onclick:preventDefault>
                <span class="menu-icon"><i class="fa-solid fa-truck"></i></span>   
                <span class="menu-text">Shipper</span>
                <span class="dropdown-arrow">‚ñº</span>
            </a>
            @if (showShipper)
            {
                <ul class="submenu">
                    @* Danh s√°ch shipper v√† Th√™m shipper - Ch·ªâ Admin v√† Staff *@
                    <AuthorizeView Roles="admin,staff">
                        <li><NavLink class="submenu-link" href="/shipper-list">Danh s√°ch shipper</NavLink></li>
                        <li><NavLink class="submenu-link" href="/create-shipper">Th√™m shipper</NavLink></li>
                    </AuthorizeView>
                    
                    @* ƒê∆°n h√†ng c·ªßa t√¥i - Hi·ªÉn th·ªã cho Shipper *@
                    <AuthorizeView Roles="shipper">
                        <li><NavLink class="submenu-link" href="/shipper-cargo-list">ƒê∆°n h√†ng c·ªßa t√¥i</NavLink></li>
                    </AuthorizeView>
                </ul>
            }
        </li>
    </ul>
</nav>


@code {
    private bool showDonHang = false;
    private bool showKhachHang = false;
    private bool showNhanVien = false;
    private bool showShipper = false;

    private void ToggleShipper()
    {
        showShipper = !showShipper;
        // ƒê√≥ng c√°c dropdown kh√°c
        showDonHang = false;
        showKhachHang = false;
        showNhanVien = false;
    }

    private void ToggleDonHang()
    {
        showDonHang = !showDonHang;
        // ƒê√≥ng c√°c dropdown kh√°c
        showKhachHang = false;
        showNhanVien = false;
        showShipper = false;
    }

    private void ToggleKhachHang()
    {
        showKhachHang = !showKhachHang;
        // ƒê√≥ng c√°c dropdown kh√°c
        showDonHang = false;
        showNhanVien = false;
        showShipper = false;
    }

    private void ToggleNhanVien()
    {
        showNhanVien = !showNhanVien;
        // ƒê√≥ng c√°c dropdown kh√°c
        showDonHang = false;
        showKhachHang = false;
        showShipper = false;
    }
}

